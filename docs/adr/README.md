# Architecture Decision Records (ADR)

このディレクトリには、割り勘アプリ（warikan-app）の開発において行われた重要なアーキテクチャ・設計決定の記録が含まれています。

## ADR一覧

### [ADR-001: プロジェクトアーキテクチャと開発手法の採用](./001-project-architecture-and-development-methodology.md)
**採用済み** | 2025-11-25

React + TypeScript + Next.js技術スタック、Manager パターン、TDD開発手法の採用決定。高品質な割り勘アプリ開発の基盤アーキテクチャを確立。

**主要決定事項:**
- React 18 + TypeScript + Next.js 14 + Tailwind CSS
- Manager パターンによるビジネスロジック分離
- Jest + Testing Library によるテスト駆動開発
- LocalStorage によるシンプルなデータ永続化

---

### [ADR-002: 分担方式の設計決定](./002-split-method-design.md)  
**採用済み** | 2025-11-25

支払いごと分担と総額割り勘の二つのアルゴリズム実装。ユーザー要求の変化に対応した柔軟な分担システムの設計。

**主要決定事項:**
- `calculateSettlement`: 支払いごと参加者選択方式
- `calculateTotalSettlement`: 総額均等分割方式  
- 均等割りと個別指定の両方対応
- あまり処理の適切な実装

---

### [ADR-003: テスト戦略とTDD実装](./003-testing-strategy.md)
**採用済み** | 2025-11-25

包括的なテスト戦略の確立とTDD手法の完全採用。発生した問題を事前に検出するテストケースの体系的な構築。

**主要決定事項:**
- Red-Green-Refactor サイクルの徹底
- 階層化テスト戦略（単体・統合・UI）
- 問題検出指向のテスト設計
- 52テストケースによる包括的カバレッジ

---

### [ADR-004: データ永続化戦略の選択](./004-data-persistence-strategy.md)
**採用済み** | 2025-11-25

LocalStorageベースの永続化戦略とManager パターンによる抽象化。プロトタイプ開発と将来的拡張性のバランスを考慮したデータ管理。

**主要決定事項:**
- LocalStorage による JSON シリアライゼーション
- Manager パターンによる永続化層抽象化
- 型安全なデータ変換（Date オブジェクト復元）
- CRUD操作の統一インターフェース

---

### [ADR-005: UI/UX設計決定とユーザビリティ向上施策](./005-ui-ux-design-decisions.md)
**採用済み** | 2025-11-25

ユーザーフィードバックに基づくUI/UX継続的改善。視認性問題の解決とリアルタイムフィードバックの実装。

**主要決定事項:**
- Tailwind CSS によるデザインシステム
- 視認性向上（テキストコントラスト4.5:1以上）
- プログレッシブディスクロージャーによる情報階層化
- リアルタイム計算とバリデーション表示

---

## ADRの読み方

各ADRは以下の構造で記述されています：

- **ステータス**: 決定の現在状態（採用済み/検討中/廃止等）
- **日付**: 決定が行われた日付
- **背景**: 決定が必要となった状況・課題
- **決定事項**: 具体的に採用した技術・手法・設計
- **理由**: 決定の根拠・考慮事項
- **結果**: 決定による効果・成果
- **トレードオフ**: 受け入れたコストと得られた利益

## プロジェクト全体への影響

### 技術的決定の系統
```
ADR-001 (基盤アーキテクチャ)
    ├── ADR-003 (テスト戦略) 
    ├── ADR-004 (データ永続化)
    └── ADR-005 (UI/UX設計)
         └── ADR-002 (分担方式設計)
```

### 品質への影響
- **テストカバレッジ**: 90%以上の成功率（47/52テスト）
- **コード品質**: TypeScript による型安全性
- **ユーザビリティ**: 継続的フィードバック対応
- **保守性**: Manager パターンによる関心の分離

### 開発効率への影響
- **TDD**: 安全なリファクタリングと迅速な問題特定
- **型安全性**: コンパイル時エラー検出
- **コンポーネント化**: 再利用可能なUI構成要素
- **明確なアーキテクチャ**: 新機能追加時の設計指針

## 関連ドキュメント

- [プロジェクトルートREADME](../../README.md)
- [API仕様書](../api/README.md) ※将来作成予定
- [デザインガイドライン](../design/README.md) ※将来作成予定
- [運用ガイド](../operations/README.md) ※将来作成予定

## ADR追加ガイドライン

新しいADRを追加する際は、以下のガイドラインに従ってください：

### 1. ADR番号の採番
- 連番で採番（006, 007...）
- ゼロパディング3桁

### 2. ファイル名規則
```
{番号}-{英語での概要}.md
例: 006-authentication-strategy.md
```

### 3. 記述すべき決定
- **アーキテクチャに影響する決定**: 技術スタック、設計パターン
- **トレードオフが伴う決定**: パフォーマンス vs 保守性等
- **将来的な変更コストが高い決定**: データモデル、外部依存
- **チーム合意が必要な決定**: コーディング規約、手法選択

### 4. 更新・廃止プロセス
- 既存ADRの修正: 更新履歴セクションに記録
- ADRの廃止: ステータスを「廃止」に変更、廃止理由を記載
- 関連ADRへの相互参照を維持

## 履歴

- **2025-11-25**: ADR-001〜005 初版作成
- **2025-11-25**: ADRディレクトリ構成とREADME作成

---

> このADRセットは、割り勘アプリの開発経験とユーザーフィードバックに基づく実践的な設計決定を記録しています。将来の機能拡張や類似プロジェクトの参考資料として活用してください。